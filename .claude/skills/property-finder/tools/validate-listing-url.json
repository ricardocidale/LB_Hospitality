{
  "name": "validate_listing_url",
  "description": "Validate and construct a realtor.com listing URL from API response data. Uses format-based validation (not HTTP HEAD requests) because realtor.com blocks server-side requests with 403.",
  "input_schema": {
    "type": "object",
    "properties": {
      "href": {
        "type": "string",
        "description": "The href or permalink field from the RapidAPI response (e.g., '/realestateandhomes-detail/...')"
      },
      "property_id": {
        "type": "string",
        "description": "The property_id from the API response (e.g., 'M16017-14990')"
      },
      "address_line": {
        "type": "string",
        "description": "Street address line (e.g., '149 3rd Ave')"
      },
      "city": {
        "type": "string",
        "description": "City name (e.g., 'San Francisco')"
      },
      "state_code": {
        "type": "string",
        "description": "Two-letter state code (e.g., 'CA')"
      },
      "postal_code": {
        "type": "string",
        "description": "ZIP code (e.g., '94118')"
      }
    },
    "required": []
  },
  "output_schema": {
    "type": "object",
    "properties": {
      "listingUrl": {
        "type": "string",
        "nullable": true,
        "description": "Validated realtor.com URL or null if construction failed"
      },
      "method": {
        "type": "string",
        "enum": ["href", "constructed", "none"],
        "description": "How the URL was determined"
      }
    }
  }
}
