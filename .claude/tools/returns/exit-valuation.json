{
  "name": "exit_valuation",
  "description": "Calculate property exit/sale valuation using the income capitalization approach (NOI / Cap Rate). Deducts selling costs (broker commission) and outstanding debt to derive net proceeds to equity. Used for terminal value in DCF/IRR analysis and to verify the Debt-Free at Exit business rule.",
  "input_schema": {
    "type": "object",
    "properties": {
      "stabilized_noi": {
        "type": "number",
        "description": "Annual Net Operating Income used for capitalization (typically final year NOI)"
      },
      "exit_cap_rate": {
        "type": "number",
        "description": "Exit capitalization rate as decimal (e.g. 0.08 = 8%)"
      },
      "commission_rate": {
        "type": "number",
        "description": "Sales commission/broker fee as decimal (e.g. 0.02 = 2%)",
        "default": 0.02
      },
      "outstanding_debt": {
        "type": "number",
        "description": "Outstanding loan balance at time of sale (must be repaid from proceeds)",
        "default": 0
      },
      "other_closing_costs": {
        "type": "number",
        "description": "Additional closing costs (transfer taxes, legal fees, etc.)",
        "default": 0
      },
      "property_name": {
        "type": "string",
        "description": "Optional property identifier for reporting"
      }
    },
    "required": ["stabilized_noi", "exit_cap_rate"]
  },
  "output_schema": {
    "type": "object",
    "properties": {
      "gross_sale_price": { "type": "number", "description": "NOI / Cap Rate — gross property value" },
      "implied_price_per_key": { "type": "number", "description": "Gross sale price / room count (if provided)" },
      "commission": { "type": "number", "description": "Broker commission deducted from gross" },
      "net_sale_proceeds": { "type": "number", "description": "Gross - commission - other closing costs" },
      "debt_repayment": { "type": "number", "description": "Outstanding debt repaid from proceeds" },
      "net_to_equity": { "type": "number", "description": "Net proceeds after debt repayment — cash to investors" },
      "debt_free_at_exit": { "type": "boolean", "description": "True if net_to_equity > 0 (debt fully covered by sale proceeds)" }
    }
  }
}
