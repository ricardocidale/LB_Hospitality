{
  "name": "validate_listing_url",
  "description": "Validate and construct a realtor.com listing URL from API response data. Uses format-based validation because realtor.com blocks server-side HEAD requests. Primary: use href/permalink matching /realestateandhomes-detail/. Fallback: construct from address + property_id.",
  "input_schema": {
    "type": "object",
    "properties": {
      "href": {
        "type": "string",
        "description": "The href/permalink from the RapidAPI response"
      },
      "property_id": {
        "type": "string",
        "description": "The property_id from the API (e.g., 'M16017-14990')"
      },
      "address_line": { "type": "string" },
      "city": { "type": "string" },
      "state_code": { "type": "string" },
      "postal_code": { "type": "string" }
    },
    "required": []
  },
  "implementation": "server/routes.ts â€” inline in GET /api/property-finder/search normalization block",
  "validation_regex": "^https:\\/\\/www\\.realtor\\.com\\/realestateandhomes-detail\\/"
}
