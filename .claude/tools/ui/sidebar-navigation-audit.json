{
  "name": "sidebar-navigation-audit",
  "description": "Audits the sidebar navigation to ensure consistency between Layout.tsx navItems, App.tsx routes, Admin sidebar settings, and the global_assumptions schema. Catches orphaned routes, missing sidebar toggles, and composite page items that should not appear as separate links.",
  "checks": [
    {
      "check": "no-orphaned-sidebar-items",
      "description": "Every sidebar href must have a matching Route in App.tsx",
      "files": ["client/src/components/Layout.tsx", "client/src/App.tsx"]
    },
    {
      "check": "no-orphaned-routes",
      "description": "Every user-facing Route should be reachable from sidebar, tabs, or redirects",
      "files": ["client/src/App.tsx", "client/src/components/Layout.tsx"]
    },
    {
      "check": "composite-pages-consolidated",
      "description": "Pages embedded in composite tabbed views (Analysis, Portfolio) must NOT appear as separate sidebar items. Map View → Properties tab. Executive Summary, Sensitivity, Financing → Analysis tabs.",
      "files": ["client/src/components/Layout.tsx"]
    },
    {
      "check": "sidebar-toggles-match-schema",
      "description": "Every sb() call in Layout must reference a real boolean column in global_assumptions schema",
      "files": ["client/src/components/Layout.tsx", "shared/schema.ts"]
    },
    {
      "check": "admin-sidebar-settings-complete",
      "description": "Admin sidebar settings UI must include toggles for all sb() fields used in Layout",
      "files": ["client/src/pages/Admin.tsx", "client/src/components/Layout.tsx"]
    },
    {
      "check": "old-routes-redirect",
      "description": "Deprecated standalone routes (/sensitivity, /financing, /executive-summary, /map) must redirect to their composite host page (/analysis, /portfolio)",
      "files": ["client/src/App.tsx"]
    }
  ],
  "usage": "Run this audit after any changes to sidebar navigation, route structure, or composite page merges. Grep for sb() in Layout.tsx and cross-reference with schema and Admin.tsx."
}
