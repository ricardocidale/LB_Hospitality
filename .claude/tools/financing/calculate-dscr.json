{
  "name": "calculate_dscr",
  "description": "Calculate the maximum supportable loan amount based on a minimum DSCR (Debt Service Coverage Ratio) threshold. Reverse-solves the PMT formula to find the largest loan where NOI / Annual Debt Service >= min_dscr. Uses amortizing (peak) debt service for sizing, consistent with standard commercial lending practice. Optionally cross-checks against an LTV constraint.",
  "input_schema": {
    "type": "object",
    "properties": {
      "noi_annual": {
        "type": "number",
        "description": "Annual Net Operating Income in dollars"
      },
      "interest_rate_annual": {
        "type": "number",
        "description": "Annual interest rate as decimal (e.g. 0.07 = 7%)"
      },
      "term_months": {
        "type": "integer",
        "description": "Total loan term in months (e.g. 120 = 10 years)"
      },
      "amortization_months": {
        "type": "integer",
        "description": "Amortization schedule length in months (e.g. 360 = 30 years)"
      },
      "io_months": {
        "type": "integer",
        "description": "Interest-only period in months (0 = fully amortizing)"
      },
      "min_dscr": {
        "type": "number",
        "description": "Minimum acceptable DSCR (e.g. 1.25)"
      },
      "purchase_price": {
        "type": "number",
        "description": "Purchase price for LTV cross-check"
      },
      "ltv_max": {
        "type": "number",
        "description": "Maximum LTV for cross-check as decimal (e.g. 0.75 = 75%)"
      }
    },
    "required": ["noi_annual", "interest_rate_annual", "term_months", "amortization_months", "min_dscr"]
  }
}
