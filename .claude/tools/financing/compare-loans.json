{
  "name": "compare_loans",
  "description": "Compare multiple financing structures side-by-side. Runs each scenario through the full financing calculator and produces normalized comparison metrics including loan amount, equity required, monthly payments (IO and amortizing separately), total interest, DSCR, debt yield, and balloon at maturity. Identifies which scenario is best on each metric.",
  "input_schema": {
    "type": "object",
    "properties": {
      "scenarios": {
        "type": "array",
        "minItems": 2,
        "items": {
          "type": "object",
          "properties": {
            "label": {
              "type": "string",
              "description": "Human-readable name for this scenario (e.g. 'Conservative 60% LTV', 'Aggressive 80% LTV')"
            },
            "purchase_price": {
              "type": "number",
              "description": "Property purchase price in dollars"
            },
            "ltv": {
              "type": "number",
              "description": "Loan-to-value ratio as decimal (e.g. 0.70 = 70%)"
            },
            "interest_rate_annual": {
              "type": "number",
              "description": "Annual interest rate as decimal (e.g. 0.065 = 6.5%)"
            },
            "term_months": {
              "type": "integer",
              "description": "Total loan term in months"
            },
            "amortization_months": {
              "type": "integer",
              "description": "Amortization schedule in months"
            },
            "io_months": {
              "type": "integer",
              "description": "Interest-only period in months (0 = none)"
            },
            "noi_annual": {
              "type": "number",
              "description": "Annual NOI for DSCR/debt yield computation"
            }
          },
          "required": ["label", "purchase_price", "ltv", "interest_rate_annual", "term_months", "amortization_months"]
        },
        "description": "Array of loan scenarios to compare (minimum 2)"
      }
    },
    "required": ["scenarios"]
  }
}
