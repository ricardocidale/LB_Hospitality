{
  "name": "research_questions_crud",
  "description": "CRUD operations for managing custom AI research questions that are merged into AI prompts during property market research generation. Questions are stored in the database with sortOrder for consistent ordering.",
  "operations": {
    "list": {
      "method": "GET",
      "path": "/api/research-questions",
      "auth": "requireAuth",
      "description": "Retrieve all research questions ordered by sortOrder ASC",
      "response_schema": {
        "type": "array",
        "items": {
          "$ref": "#/schemas/ResearchQuestion"
        }
      }
    },
    "create": {
      "method": "POST",
      "path": "/api/research-questions",
      "auth": "requireAuth",
      "description": "Create a new research question. Auto-assigns sortOrder as max(existing) + 1.",
      "input_schema": {
        "type": "object",
        "properties": {
          "question": {
            "type": "string",
            "description": "The research question text to be included in AI prompts",
            "minLength": 1
          }
        },
        "required": ["question"]
      },
      "response_schema": {
        "$ref": "#/schemas/ResearchQuestion"
      }
    },
    "update": {
      "method": "PUT",
      "path": "/api/research-questions/:id",
      "auth": "requireAuth",
      "description": "Update the question text of an existing research question",
      "input_schema": {
        "type": "object",
        "properties": {
          "question": {
            "type": "string",
            "description": "Updated question text",
            "minLength": 1
          }
        },
        "required": ["question"]
      },
      "response_schema": {
        "$ref": "#/schemas/ResearchQuestion"
      }
    },
    "delete": {
      "method": "DELETE",
      "path": "/api/research-questions/:id",
      "auth": "requireAuth",
      "description": "Delete a research question by ID",
      "response_schema": {
        "type": "object",
        "properties": {
          "success": { "type": "boolean" }
        }
      }
    }
  },
  "schemas": {
    "ResearchQuestion": {
      "type": "object",
      "properties": {
        "id": { "type": "integer", "description": "Auto-generated primary key" },
        "question": { "type": "string", "description": "The research question text" },
        "sortOrder": { "type": "integer", "description": "Display ordering (0-based)" },
        "createdAt": { "type": "string", "format": "date-time", "description": "Creation timestamp" }
      }
    }
  },
  "integration_point": {
    "description": "During AI research generation (POST /api/market-research/property/:id/generate), all research questions are fetched from DB, joined with newlines, and set as researchVariables.customQuestions in the AI prompt.",
    "triggered_by": "Market research generation endpoint",
    "storage_method": "storage.getResearchQuestions()"
  }
}
